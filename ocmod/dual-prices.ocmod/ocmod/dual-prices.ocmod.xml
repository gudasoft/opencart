<?xml version="1.0" encoding="utf-8"?>
<modification>
  <name>Dual Prices for Bulgaria Euro Transition</name>
  <description>Adds Euro conversion display for BGN prices to help with Bulgaria Euro transition.
    If you need professional web services you can find us on https://www.gudasoft.com/
  </description>
  <code>dual-prices</code>
  <version>4.1.0.0</version>
  <author>Gudasoft</author>
  <link>https://gudasoft.com</link>

  <file path="system/library/cart/currency.php">
    <operation>
      <search><![CDATA[return $string;]]></search>
      <add position="before"><![CDATA[
                if ($currency == 'BGN') {
                  $eur_currency_value = 1.95583;
                  $eur_symbol_left = 'â‚¬';
                  $eur_symbol_right = '';
                  $eur_decimal = 2;

                  if (isset($this->currencies['EUR'])) {
                    $eur_currency_value = $this->currencies['EUR']['value'];
                    $eur_symbol_left = $this->currencies['EUR']['symbol_left'];
                    $eur_symbol_right = $this->currencies['EUR']['symbol_right'];
                    $eur_decimal = $this->currencies['EUR']['decimal_place'];
                  }
                }


                if (isset($eur_currency_value)) {
                    $eur_value = round((float)$number * $eur_currency_value, (int)$eur_decimal);
                    $eur_formatted_value = number_format($eur_value, (int)$eur_decimal, $this->language->get('decimal_point'), $this->language->get('thousand_point'));

                    $string .= " / $eur_symbol_left$eur_formatted_value$eur_symbol_right";
                }
]]></add>
    </operation>
  </file>
</modification>
